<div class="container-fluid">
    <div class="row mt-3">
      <div class="col-12">
        <div class="mt-3">
          <mat-card>
      <!-- form begins here -->
          <form [formGroup]="myForm" autocomplete="off">
              <!-- Value: {{ myForm.value | json }} -->
              <hr>
          <table>
            <tbody>
              <tr>
                <td>
                  <ng-select [items]="allDepts"
                  bindLabel="name"
                  autofocus
                  bindValue="id"
                  placeholder="Select Department"
                  formControlName="department"
                  (change)="changeSelect()">
                  </ng-select>
              </td>
            </tr>

            <div formArrayName="capacities">
              <div *ngFor="let capacity of capacityForms.controls; let i=index" [formGroupName]="i">
                <tr>
                  <td>
                      <ng-select class="select-fields" [items]="allLines"
                      placeholder="Select Line"
                      bindLabel="name"
                      bindValue="id"
                      formControlName="line">
                      </ng-select>
                  </td>
                  <td class="pl-5">
                      <ng-select class="select-fields" [items]="allProducts"
                      placeholder="Select Product"
                      bindLabel="name"
                      bindValue="id"
                      formControlName="product">
                      </ng-select>
                  </td>
                  <td class="pl-5">
                    <mat-form-field class="xs">
                      <input matInput placeholder="Output Per Day" formControlName="output">
                    </mat-form-field>
                  </td>
                  <td class="pl-5">
                    <mat-form-field class="xs">
                      <input matInput placeholder="Manpower Headcount" formControlName="headcount">
                    </mat-form-field>
                  </td>
                  <td class="pl-2">
                    <button mat-raised-button color="warn" *ngIf="i!=0" (click)="deleteArea()">Delete</button>
                  </td>
                </tr>
              </div>
            </div>
            <button mat-raised-button color="primary" (click)="addArea()">Add Area Number</button>
            <tr>
              <td  colspan="100%" style="text-align:center;">
                  <button [disabled]="!myForm.valid" mat-raised-button color="warn" (click)="submitForm()">
                      <mat-icon matSuffix>publish</mat-icon>&nbsp;&nbsp;Insert
                    </button>
              </td>
            </tr>
          </tbody>
        </table>
      </form>
      <!-- form ends here -->
        </mat-card>
        </div>
      </div>
    </div>
  </div>